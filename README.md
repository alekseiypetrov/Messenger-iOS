# Курсовая работа (МиСТ)

## Тема: Разработка мессенджера OneOnOne

Задача: разработать мессенджер на iOS.

[Ссылка на макет Figma](https://www.figma.com/design/f9xJVeqgR2SkvmrF8lCu49/Мессенджер-OneOnOne?node-id=17-1159&p=f&t=DCCZyaR3C8NQDdpS-0)

Мобильное приложение состоит из следующих эпиков:

- Авторизация
- Друзья
- Чаты
- Профиль

#### Нефункциональные требования:

- защищенное хранилище для авторизационного токена клиента
- поддержка темной темы
- локализация (через R.swift)
- возможность ограниченной работы в оффлайн режиме

#### Функциональные требования:

- многопоточность: async/await
- архитектура: **MVVM**
- верстка: UIKit

Принцип работы: при запуске приложения открывается SplashScreen, идет проверка на наличие токена. Если токена нет, то клиент отправляется на экран авторизации. Если токен есть то он попадает в сам мессенджер.

------------

#### Эпик "Авторизация"

Открывается, если у пользователя нет токена или его срок истек.

Состоит из:

- 2х текстовых полей логина и пароля
- кнопок "Забыл пароль", "Зарегистрироваться" и "Войти"

**Функциональные требования**

1. Если нажата кнопка "Забыл пароль", то пользователю предложат сбросить его, указав почту, на которую был заведен данный аккаунт. На эту почту приходит код, после успешного ввода которого, предлагается придумать новый пароль и подтвердить его. После чего пользователя отправляют обратно на экран авторизации.
2. Если нажата кнопка "Зарегистрироваться", то пользователю предлагается ввести почту, фамилию и имя, придумать свой тег и пароль (с его подтверждением). После чего, для подтверждения личности, необходимо будет ввести код, высланный на указанную выше почту.
3. Иначе пользователь вводит свой логин (это либо почта, либо тег) и пароль. При неверно введенном пароле пользователь получает соответствующее сообщение и не может попасть дальше в приложение. При верно введенных данных пользователь получает авторизационный токен и попадает в сам мессенджер.

------------

#### Эпик "Друзья"

Первая страница на TabBar'е. Отображает список людей в трех секциях: друзья, исходящий запрос в друзья и входящий запрос в друзья.

Состоит из:

- сообщение об пустом списке друзей (если пока их нет)
- поле поиска человека
- кнопки сортировки друзей
- кнопки "+" для поиска новых друзей
- таблицы из 3х секций (если они не пусты), каждая ячейка из которых состоит из:
	- аватар
	- фамилия и имя
	- тег

**Функциональные требования**

1. При нажатии на человека из таблицы открывается его профиль, в котором:
	- отображается фамилия и имя человека, его тег и аватар
	- выполнить манипуляцию с дружбой (отклонить входящий/исходящий запрос в друзья, удалить из друзей или добавить в друзья)
	- нажать на кнопку "Написать сообщение", которая либо создаст, либо откроет уже существующий чат с этим человеком
2. В поле поиска можно найти человека из списка как по фамилии и имени, так и по тегу.
3. При нажатии на "+" логика поиска и таблицы та же, что и в списке друзей.
4. При нажатии на кнопку сортировки можно выбрать несколько режимов порядка отображения друзей: по тегу, по имени

------------

#### Эпик "Чаты"

Вторая страница на TabBar'е. Отображает список существующих чатов у текущего пользователя с другими людьми. Состоит из:

- сообщение об пустом списке диалогов (если пока их нет)
- поле поиска чата
- кнопки "+" для создания нового диалога
- таблицы, каждая ячейка из которой состоит из:
	- аватар
	- фамилия и имя собеседника
	- флажок (видимый или нет в зависимости от наличия или отсутствия новых сообщений)

**Функциональные требования**

1. При нажатии на чат из таблицы открывается переписка, в которой:
	- отображается история переписки, каждое сообщение из которых состоит из текста и времени отправки
	- доступна манипуляция с сообщениями: удаление, редактирование, пересылка, ответ на них
	- в самом верху отображается "шапка" - имя собеседника
	- при нажатии на "шапку" открывается профиль с вложениями
2. При зажатии на чат в таблице его можно удалить
3. В поле поиска можно найти диалог из списка как по фамилии и имени, так и по тегу.
4. При нажатии на "+" открывается список друзей, с которыми можно начать диалог. При нажатии на человека без диалога открывается новый диалог, иначе существующий.

------------

#### Эпик "Профиль"

Третья страница на TabBar'е. Отображает информацию об авторизованном пользователе. Состоит из:

- аватара пользователя
- имя, фамилия человека
- тег
- список настроек:
	- кнопка "Изменить данные" (опционально)
	- настройка конфиденциальности (опционально)
	- кнопка настройки оформления "Выбор темы"
	- кнопка "Выйти"

**Функциональные требования**

0. *Опционально* При нажатии на кнопку "Изменить данные" пользователю предоставится возможность изменить свой аватар, имя, фамилию, тег, а также почту с подтверждением
1. При нажатии на кнопку "Выбор темы" пользователю предоставится возможность выбрать тему в приложении: светлая, темная или системная
2. При нажатии на кнопку выйти будет задан повторный вопрос об деавторизации. Если пользователь подтверждает свое намерение, то происходит деавторизация и он снова окажется на экране авторизации